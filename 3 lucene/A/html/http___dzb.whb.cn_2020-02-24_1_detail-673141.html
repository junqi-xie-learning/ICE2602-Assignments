<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">
  <meta name="full-screen" content="yes">
  <meta name="x5-fullscreen" content="true">
  <title>电子报_内容详情</title>
  <link rel="stylesheet" href="/electronAssets/style/mixin.css">
  <link rel="stylesheet" href="/electronAssets/style/detail.css">
  <!-- <link rel="stylesheet" href="/electronAssets/dist/swipercss/swiper.min.css"> -->
</head>

<body>
  <div class="page_2">
    <!-- header -->
    <header class="header">
      <div class="ctn">
        
       <div class="dateNav">日期选择 
          <img  src="/electronAssets/images/calander.png" alt="logo" class="calander">
          <div class="date">
            <div class="dateBox">
            </div>
          </div>
        </div>
        <div class="text ctn_1">
          <p>2020-02-24 第26,419号</p>
          <p>上海报业集团主管主办·文汇报社出版</p>
        </div>
        <div class="ctn_1">
          <img class="logo" src="/electronAssets/images/logo.png" alt="logo">
        </div>
      </div>
    </header>

    <!-- content -->
    <div class="content_container">
      <div class="content_box clear">
        <div class="newspaper_container left view">
          <!-- 大图paperswiper -->
		           <div class="newspaper_box" id="newspaperBox">
		            <img src="/imgPath/2020-02-24/b_10224.jpg" usemap="#newspaper" border="0" alt="newspaper" class="nocomposeImg">
		            <map name="newspaper" id="newspaper">
		            </map>
		            <a id="targetMask" class="float_box pointer" href=" ./../pages/detail.html"></a>
		          </div>




        </div>
        <div class="news_content_box right">
          <div class="bar_box clear">
          		<div class="left version_help">第1版：要闻</div>
                 
           
            <ul class="opt_box right clear">
              <!-- <li class="opt_item left pointer">设置字体</li> -->
              <!-- <li class="opt_item left pointer">全文转发</li> -->
              <li class="opt_item left pointer nextArticle">
                <a href="/2020-02-24/1/detail-673142.html">下一篇</a>
              </li>
              <li class="opt_item left pointer backList">
                <a href="/2020-02-24/1/index.html">返回列表</a>
              </li>
            </ul>
          </div>
          <div class="news_box fadeIn">
            <div class="news_header">
              <h3 class="news_sub_title"></h3>
              <h2 class="news_title">上海医疗队的拼搏，大家都看在眼里</h2>
              <h3 class="news_sub_title" style="line-height: 2;"></h3>
            </div>
            <div class="news_content" id="newsContent">
			    
              
             &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    武汉胜则湖北胜，湖北胜则全国胜。如果说，这是一场与新冠肺炎的对战，雷霆之势即起，全国各地驰援武汉的医务人员无疑是“风暴中心的人”。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    在全球都没有特效药，新药、疫苗研制还需时日的情况下，这批医务人员面对的无疑是一场“最硬的仗”。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    鏖战至今，战情胶着，上海医疗队正在做什么，有什么重要发现和经验分享给全国同道？记者连线了几名“风暴中心的人”，听听他们眼中的“武汉战场”。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    ◆详细报道刊第四版<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </div>
          </div>
        </div>
      </div>
<div class="push"></div>

    </div>

    <!-- footer -->
    <footer class="footer">
      <!-- 缩略图轮播 -->
      <div class="swiperBox">
        <div class="swiper-button-prev"> </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-container">
<div>
          <div class="swiper-wrapper" style="padding: 5px 0;max-width: 1200px;">
                <div class="swiper-slide active-nav">
	              <a href="javascript:void(0)" data-href="/2020-02-24/1/index.html" ><img src="/imgPath/2020-02-24/small_10224.jpg" alt=""> </a>
	              <div>
要闻 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/2/index.html" ><img src="/imgPath/2020-02-24/small_20224.jpg" alt=""> </a>
	              <div>
专版 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/3/index.html" ><img src="/imgPath/2020-02-24/small_30224.jpg" alt=""> </a>
	              <div>
专版 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/4/index.html" ><img src="/imgPath/2020-02-24/small_40224.jpg" alt=""> </a>
	              <div>
近距离 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/5/index.html" ><img src="/imgPath/2020-02-24/small_50224.jpg" alt=""> </a>
	              <div>
专版 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/6/index.html" ><img src="/imgPath/2020-02-24/small_60224.jpg" alt=""> </a>
	              <div>
专版 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/7/index.html" ><img src="/imgPath/2020-02-24/small_70224.jpg" alt=""> </a>
	              <div>
国际 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/8/index.html" ><img src="/imgPath/2020-02-24/small_80224.jpg" alt=""> </a>
	              <div>
环球 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/9/index.html" ><img src="/imgPath/2020-02-24/small_90224.jpg" alt=""> </a>
	              <div>
文化 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/10/index.html" ><img src="/imgPath/2020-02-24/small_100224.jpg" alt=""> </a>
	              <div>
运动 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/11/index.html" ><img src="/imgPath/2020-02-24/small_110224.jpg" alt=""> </a>
	              <div>
阅读 
                </div>
	            </div>
                <div class="swiper-slide">
	              <a href="javascript:void(0)" data-href="/2020-02-24/12/index.html" ><img src="/imgPath/2020-02-24/small_120224.jpg" alt=""> </a>
	              <div>
笔会 
                </div>
	            </div>
          </div>
        </div>
</div>
      </div>
    </footer>
  </div>
  <script src="/electronAssets/js/jquery-3.3.1.min.js"></script>
  <!-- <script src="/electronAssets/dist/js/swiper.min.js"></script> -->
  <script src="/electronAssets/js/moment.js"></script>
  <script src="/electronAssets/layDate-v5.0.9/laydate/laydate.js"></script>
  <script>
    // 新闻列表
    var news = [
	    {
	        title: "以仁心仁术造福人民特别是基层群众",
	        coords: [202.3203432248838,6.514628297362111,383.7254200929567,6.514628297362111,383.7254200929567,78.72997601918466,202.3203432248838,78.72997601918466],
	        url: "/2020-02-24/1/detail-673135.html"
	      },
	    {
	        title: "习近平的回信",
	        coords: [266.1816231676797,42.6916067146283,383.5859849839113,42.6916067146283,383.5859849839113,76.51223021582734,266.1816231676797,76.51223021582734],
	        url: "/2020-02-24/1/detail-673136.html"
	      },
	    {
	        title: "毫不放松抓紧抓实抓细防控工作 统筹做好经济社会发展各项工作",
	        coords: [9.202717196996783,109.50119904076739,376.75366464068645,109.50119904076739,376.75366464068645,379.6503597122302,9.202717196996783,379.6503597122302],
	        url: "/2020-02-24/1/detail-673137.html"
	      },
	    {
	        title: "以必胜之心责任之心仁爱之心谨慎之心 统筹抓好疫情防控和经济社会发展工作",
	        coords: [134.694315337862,319.4940047961631,376.61422953164106,319.4940047961631,376.61422953164106,376.4623501199041,134.694315337862,376.4623501199041],
	        url: "/2020-02-24/1/detail-673138.html"
	      },
	    {
	        title: "致敬慰问白衣战士 全力解决后顾之忧",
	        coords: [9.202717196996783,391.7093525179856,268.69145513049693,391.7093525179856,268.69145513049693,445.073860911271,9.202717196996783,445.073860911271],
	        url: "/2020-02-24/1/detail-673139.html"
	      },
	    {
	        title: "隔离服上写着同一个名字：上海",
	        coords: [11.57311405076868,458.1031175059952,268.69145513049693,458.1031175059952,268.69145513049693,567.1884892086331,11.57311405076868,567.1884892086331],
	        url: "/2020-02-24/1/detail-673140.html"
	      },
	    {
	        title: "上海医疗队的拼搏，大家都看在眼里",
	        coords: [10.039327851269217,508.69544364508397,134.4154451197712,508.69544364508397,134.4154451197712,564.9707434052758,10.039327851269217,564.9707434052758],
	        url: "/2020-02-24/1/detail-673141.html"
	      },
	    {
	        title: "慰问信",
	        coords: [278.45191276367535,391.432134292566,377.8691455130497,391.432134292566,377.8691455130497,568.1587529976019,278.45191276367535,568.1587529976019],
	        url: "/2020-02-24/1/detail-673142.html"
	      },
	    {
	        title: "上海市天气预报",
	        coords: [111.82695745441545,61.40383693045564,198.55559528065785,61.40383693045564,198.55559528065785,68.19568345323742,111.82695745441545,68.19568345323742],
	        url: "/2020-02-24/1/detail-673143.html"
	      },
    ], 
    isNext = null,
    params = search2Obj(window.location.href);

     // 获取矩形描绘坐标值
    function getCoords(coords) {
      var len = Array.isArray(coords) ? coords.length : 0;
      // return coords[0] + "," + coords[1] + "," + coords[len - 4] + "," + coords[len - 3];
      return [[coords[0], coords[1]], [coords[len - 4], coords[len - 3]]]
    }

    // 获取矩形宽高等
    function getReactAttr(coords) {
      var len = Array.isArray(coords) ? coords.length : 0;
      return {
        width: coords[len - 4] - coords[0],
        height: coords[len - 3] - coords[1],
        top: coords[1],
        left: coords[0]
      }
    }

    //获取url参数
    function GetQueryString(name) {
      var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)');
      var r = window.location.search.substr(1).match(reg);
      var s = window.location.search;
      var href = window.location.href;
      var index = href.indexOf('?');
      if (s === '') {
        r = href.substr(index + 1).match(reg)
      }
      if (r != null) return unescape(r[2]);
      return null
    }

    function search2Obj(str){
      str = str || '';
      str = str.indexOf('?') > -1 ? str.slice(str.indexOf('?') + 1) : str;
      
      var items = str.split('&');
      var result = {};
      for (let i = 0; i < items.length; i++) {
        var arr = items[i].split('=');
        var key = arr[0];
        var value = arr[1];
        if (key) {
          if (result[key]) {
            if (Array.isArray(value)) {
              result[key] = result[key].concat(value);
            } else {
              result[key] = [result[key]].concat(value);
            }
          } else {
            result[key] = value;
          }
        }
      }
      return result;
    }

    // 页面加载
    $(document).ready(function () {
      var time = moment().format("YYYY-MM-DD");
      var now = moment().format("x");
      var activeDate = "";
      var lastDate = "", nextDate = "";
      var date = GetQueryString("date"), 
          html = '', 
          initialSlide = $('.swiper-slide.active-nav').index(); // 初始swiper Index
          console.log("date",date)
      // 显示文字内容
      //$("#newsContent").html(rawNewsContent);

      // 添加矩形框
      news.forEach(function(obj, idx){
        // html = html + "<area shape='rect' coords=" + getCoords(obj.coords) + " data-id=" + idx + " data-title=" + obj.title + " href ="+obj.url+" title= " + obj.title + "/>"
        var coords = getCoords(obj.coords);
						html += "<span style='position: absolute;left: "+ coords[0][0]+"px;top: "+ coords[0][1] +"px;width: "+ (coords[1][0]-coords[0][0]) +"px;height: "+ (coords[1][1]- coords[0][1]) +"px;z-index: "+(10 + idx)+"' data-id='"+idx+"' data-title='"+obj.title+"' data-href='"+obj.url+"' title='"+obj.title+"'></span>"
      });
      $("#newspaper").html(html);


        $("#newspaperBox").on("mouseenter", function (e) {
          $("#newspaperBox").css({
        "box-shadow":'none',
        "overflow": "visible"
      })        })
      // 添加鼠标hover事件
      $("#newspaperBox").on("mouseleave", function (e) {
                          $("#targetMask").hide();
                           $(this).css({
        "box-shadow":'rgba(0, 0, 0, 0.5) 0px 2px 4px 0px',
        "overflow": "hidden"
      })                        })
                        .find("span")
                        .on("mouseenter", function (e) {
                          var areaHref=e.target.dataset.href;
                          $("#targetMask").attr("href",areaHref)
                          var targetNews = news[e.target.dataset.id], floatBox = $("#targetMask"),
                            floatStyle = getReactAttr(targetNews.coords),
                            mouseXY = {
                              X: e.clientX,
                              Y: e.clientY
                            };
                          floatBox.css({
                            width: floatStyle.width + 4,
                            height: floatStyle.height + 4,
                            top: floatStyle.top - 2,
                            left: floatStyle.left - 2
                          }).show().html("<div class='help_text' style='top: " + mouseXY.Y + "px; left: " + mouseXY.X + "px '>" + targetNews.title + "</div>");
                        });


      // 上一篇/下一篇
      $('.swiperBox').on('click', function (e) {
        e.preventDefault();
        if(e.target.className.indexOf("swiper-button-prev") != -1){
          updateNavPosition(true);
        }else if(e.target.className.indexOf("swiper-button-next") != -1){
          updateNavPosition(false);
        }        
      });

      $('.swiperBox .swiper-slide').on("click", function(){
          var href = $(this).find("a").data("href");
          var left = $('.swiperBox .swiper-container')[0].scrollLeft;
          window.location.href = href + '?left=' + left ;
      }).eq(initialSlide).addClass('active-nav');

      if($('.swiperBox .swiper-slide').length > 11){
        var cur = parseInt(initialSlide) + 1;
        var targetLeft = $('.swiperBox .swiper-slide.active-nav')[0].offsetLeft;
        var userScrollLeft = parseInt(params.left || 0);
        if( userScrollLeft < targetLeft && targetLeft <= userScrollLeft + 1200){
          $(".swiperBox .swiper-container").scrollLeft(userScrollLeft);
        }else{
          $(".swiperBox .swiper-container").scrollLeft(targetLeft);
        }
      }

      // 更新footer nav 位置信息
      function updateNavPosition(isPre) {
	    	var preIdx = $('.swiperBox .active-nav').index();
	      $('.swiperBox .active-nav').removeClass('active-nav');
	      var activeNav = $('.swiperBox .swiper-slide').eq(isPre ? preIdx - 1 : preIdx + 1).addClass('active-nav')
	      if (!activeNav.hasClass('swiper-slide-visible')) {
	        var idx = activeNav.index();
	        if (idx == -1) {
	          idx = isPre ? $('.swiperBox .swiper-slide').length : 0;
	        }
	        window.location.href = $('.swiperBox .swiper-slide').eq(idx).find("a").data("href") + '?left=' + $('.swiperBox .swiper-container')[0].scrollLeft;
	      }
    	}
      //切换图片
      $(".viewList > li").on("click", function (e) {
console.log(e)
        let i = e.target.dataset.i;
        let imgSrc = $(e.target).attr("src")
        let title = e.target.dataset.title;
        $("#ctnImg").attr("src", imgSrc)
        $("#ctnA").attr("href", imgSrc)
        $("#titleImg").text(title)
        if(title.length==0){
        	$("#titleImg").attr("style","display:none");
        }else{
        	$("#titleImg").attr("style","display:block");
        }
        
      })

console.log("2020-02-24")
       //日期切换
      laydate.render({
        elem: '.dateBox',
        position: 'static',
        showBottom: false,
        theme: '#fff',
        value:moment("2020-02-24").format("YYYY-MM-DD"),
        isInitValue: true,
        max: time,
       done: function(value, date){
      	if (moment(value).format("x") < moment().format("x") && value) {
          var link = moment(value).format("X") < moment("2019/01/01").startOf('day').format("X") ? '/html/' + moment(value).format("YYYY-MM/DD") + '/node_61.html' : ('/' + value + '/1/index.html');
          window.location.href = link;
        }
      }
      });

      function datePage(value) {
        lastDate = moment(value).subtract(1, "days").format("YYYY-MM-DD");
        nextDate = moment(value).add(1, "days").format("YYYY-MM-DD");
        activeDate = value;
        return lastDate, nextDate, activeDate
      }

      // 日期选择hover延迟
      (function ($) {
        $.fn.hoverDelay = function (options) {
          var defaults = {
            hoverDuring: 200,
            outDuring: 200,
            hoverEvent: function () {
              $.noop();
            },
            outEvent: function () {
              $.noop();
            }
          };
          var sets = $.extend(defaults, options || {});
          var hoverTimer, outTimer;
          return $(this).each(function () {
            $(this).hover(function () {
              clearTimeout(outTimer);
              hoverTimer = setTimeout(sets.hoverEvent, sets.hoverDuring);
            }, function () {
              clearTimeout(hoverTimer);
              outTimer = setTimeout(sets.outEvent, sets.outDuring);
            });
          });
        }
      })(jQuery);

      $(".dateNav").hoverDelay({
        outDuring: 200,
        hoverEvent: function () {
          $(".date").show();
        },
        outEvent: function () {
          $(".date").hide();
        }
      });
    
    });
  </script>
</body>

</html>